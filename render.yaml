# Render Blueprint for Social Scribe (free tier).
# After connecting this repo: New > Blueprint > connect repo > deploy.
# Set PHX_HOST in the web service to your URL (e.g. social-scribe.onrender.com).
# If DATABASE_URL from Render is postgres://, set it manually to ecto://user:pass@host/db.

databases:
  - name: social-scribe-db
    plan: free

services:
  - type: web
    runtime: docker
    name: social-scribe
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: social-scribe-db
          property: connectionString
      - key: SECRET_KEY_BASE
        generateValue: true
      - key: PHX_HOST
        sync: false
      - key: PHX_SERVER
        value: "true"
